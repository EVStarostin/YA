!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1),n(2)},function(e,t){const n="data/events.json";function r(){document.querySelector("#nav-menu").classList.toggle("menu_visible")}function o(){setTimeout(()=>{document.querySelectorAll(".event__title").forEach(e=>{const t=2*parseFloat(getComputedStyle(e).lineHeight);e.scrollHeight-t>5&&e.classList.add("event__title_truncated"),e.style.maxHeight=`${t}px`})},100)}window.onload=function(){"content"in document.createElement("template")?async function(){const e=await fetch(n).then(e=>e.json()).then(e=>e).catch(e=>console.error(e));if(!e)return null;const t=document.querySelector("#events"),r=document.querySelector("#events-template"),a=r.content.querySelector(".event");e.events.forEach(e=>{const n=document.importNode(a,!0);n.classList.add(`event_size_${e.size}`),"critical"===e.type&&n.classList.add("event_critical");const i=n.querySelector(".event__icon");if(i.setAttribute("src",`img/${e.icon}${"critical"===e.type?"-white":""}.svg`),i.setAttribute("alt",e.source),n.querySelector(".event__title").textContent=e.title,n.querySelector(".event__source").textContent=e.source,n.querySelector(".event__time").textContent=e.time,e.description||e.data){var c=document.createElement("div");c.classList.add("event__details"),n.appendChild(c)}if(e.description){const t=r.content.querySelector(".event__description"),n=document.importNode(t,!0);n.textContent=e.description,c.appendChild(n)}if(e.data&&"graph"===e.data.type){const e=r.content.querySelector(".event__graph"),t=document.importNode(e,!0);c.appendChild(t)}if(e.data&&e.data.temperature){const t=r.content.querySelector(".event__temp-and-hum"),n=document.importNode(t,!0);n.querySelector("#temp").textContent=e.data.temperature,n.querySelector("#hum").textContent=e.data.humidity,c.appendChild(n)}if(e.data&&e.data.track){const t=r.content.querySelector(".event__track"),n=document.importNode(t,!0);n.querySelector(".event__track__cover").setAttribute("src",e.data.albumcover),n.querySelector(".event__track__name").textContent=`${e.data.artist} - ${e.data.track.name}`,n.querySelector(".event__track__time").textContent=e.data.track.length,n.querySelector(".event__track__vol").textContent=e.data.volume,c.appendChild(n)}if(e.data&&e.data.buttons){const t=r.content.querySelector(".event__btn-group"),n=document.importNode(t,!0);n.querySelector(".event__btn-confirm").textContent=e.data.buttons[0],n.querySelector(".event__btn-cancel").textContent=e.data.buttons[1],c.appendChild(n)}if(e.data&&e.data.image){const e=r.content.querySelector(".event__pic"),t=document.importNode(e,!0);c.appendChild(t)}t.appendChild(n),o()})}():console.error("тег <template> не поддерживается браузером. Обновитесь на Yandex Browser"),"ontouchstart"in window&&document.body.classList.add("touch"),window.onresize=function(){o()},document.querySelector("#toggle-menu").addEventListener("click",r)}},function(e,t){setTimeout(function(e){let t={arr:[],startZoom:null,initialDistance:null};const n={startZoom:1},r=document.querySelector(".event__pic-img");function o(e){if(2!==t.arr.length)return;const r=t.arr.find(t=>t.pointerId===e.pointerId),o=t.arr.find(e=>e!==r);console.log(Math.abs(o.prevX-r.prevX-(o.prevX-r.prevX-e.x)));const a=Math.abs(o.prevX-e.x),i=a-t.initialDistance,c=t.startZoom+i/100;results.innerText=`\n      curGest: prevX = ${r.prevX} | x = ${e.x}\n      secondGest = ${o.prevX}\n      distance = ${a}\n      zoom = ${c}\n      initialDistance = ${t.initialDistance}\n      ${Math.abs(o.prevX-r.prevX-(o.prevX-r.prevX-e.x))}\n    `,document.querySelector(".event__pic-img").style.backgroundSize=`${100*c}%`,n.startZoom=c,console.log("startZoom",t.startZoom),r.prevX=e.x}r.addEventListener("pointerdown",function(e){r.setPointerCapture(e.pointerId),t.startZoom=n.startZoom,t.arr.push({pointerId:e.pointerId,startX:e.x,prevX:e.x,prevTs:Date.now()}),2===t.arr.length?t.initialDistance=Math.abs(t.arr[0].prevX-e.x):t.initialDistance=t.arr.join("; ");r.addEventListener("pointermove",o)}),r.addEventListener("pointerup",e=>{t.arr=t.arr.filter(t=>t.pointerId!==e.pointerId)})},1e3)}]);